!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):(n="undefined"!=typeof globalThis?globalThis:n||self)["use-permission"]=e(n.Vue)}(this,(function(n){"use strict";function e(n){return"string"==typeof n}function t(n){return Array.isArray(n)}function r(n){return"[object Object]"===Object.prototype.toString.call(n)}return function(i){var o=r(i)?i:{},u=new n({data:{permissionMap:Object.assign({},o)}});function a(n){return!!u.permissionMap[n]}function s(n,e){return u.$watch((function(){return u.permissionMap[n]}),e)}function f(n){return t(n)&&n.every((function(n){return a(n)}))}var c={name:"Permission",functional:!0,props:{name:{type:[String,Array],default:function(){return[]}}},render:function(n,t){var r=t.props,i=t.slots;return f(e(r.name)?[r.name]:r.name)?i().default:null}},p=new Map;function d(n,e){n.style.display=e?n.dataset.display:"none"}function l(n,r){var i=function(n){return e(n)||t(n)?t(n)?n:[n]:[]}(r);d(n,f(i)),(p.get(n)||[]).forEach((function(n){return n()}));var o=i.map((function(e){return s(e,(function(){return d(n,f(i))}))}));p.set(n,o)}return{component:c,directive:{bind:function(e,t){var r=t.value;n.nextTick((function(){e.dataset.display=getComputedStyle(e).display,l(e,r)}))},update:function(n,e){var t=e.value;t!==e.oldValue&&l(n,t)}},setPermission:function(n,t){var i;if(e(n)||r(n)){var o=e(n)?((i={})[n]=t,i):n;Object.keys(o).forEach((function(n){u.$set(u.permissionMap,n,o[n])}))}},hasPermission:a,watchPermission:s}}}));
